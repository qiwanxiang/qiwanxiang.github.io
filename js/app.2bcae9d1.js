(function(e){function t(t){for(var n,c,l=t[0],r=t[1],a=t[2],u=0,b=[];u<l.length;u++)c=l[u],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&b.push(s[c][0]),s[c]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);p&&p(t);while(b.length)b.shift()();return i.push.apply(i,a||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,l=1;l<o.length;l++){var r=o[l];0!==s[r]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},s={app:0},i=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var p=r;i.push([1,"chunk-vendors"]),o()})({0:function(e,t){},"0e48":function(e,t,o){},1:function(e,t,o){e.exports=o("56d7")},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Home")],1)},i=[],c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-container"},[t("el-card",{staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"always"}},[t("div",{staticClass:"emq-title"},[e._v(" Configuration ")]),t("el-form",{ref:"configForm",attrs:{"hide-required-asterisk":"",size:"small","label-position":"top",model:e.connection}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"host",label:"Host"}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:7}},[t("el-select",{on:{change:e.handleProtocolChange},model:{value:e.connection.protocol,callback:function(t){e.$set(e.connection,"protocol",t)},expression:"connection.protocol"}},[t("el-option",{attrs:{label:"ws://",value:"ws"}}),t("el-option",{attrs:{label:"wss://",value:"wss"}})],1)],1),t("el-col",{attrs:{span:17}},[t("el-input",{model:{value:e.connection.host,callback:function(t){e.$set(e.connection,"host",t)},expression:"connection.host"}})],1)],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"port",label:"Port"}},[t("el-input",{attrs:{type:"number",placeholder:"8083/8084"},model:{value:e.connection.port,callback:function(t){e.$set(e.connection,"port",e._n(t))},expression:"connection.port"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"endpoint",label:"Mountpoint"}},[t("el-input",{attrs:{placeholder:"/mqtt"},model:{value:e.connection.endpoint,callback:function(t){e.$set(e.connection,"endpoint",t)},expression:"connection.endpoint"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"clientId",label:"Client ID"}},[t("el-input",{model:{value:e.connection.clientId,callback:function(t){e.$set(e.connection,"clientId",t)},expression:"connection.clientId"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"username",label:"Username"}},[t("el-input",{model:{value:e.connection.username,callback:function(t){e.$set(e.connection,"username",t)},expression:"connection.username"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"password",label:"Password"}},[t("el-input",{model:{value:e.connection.password,callback:function(t){e.$set(e.connection,"password",t)},expression:"connection.password"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"conn-btn",staticStyle:{"margin-right":"20px"},attrs:{type:"success",size:"small",disabled:e.client.connected,loading:e.connecting},on:{click:e.createConnection}},[e._v(" "+e._s(e.client.connected?"Connected":"Connect")+" ")]),e.client.connected?t("el-button",{staticClass:"conn-btn",attrs:{type:"danger",size:"small"},on:{click:e.destroyConnection}},[e._v(" Disconnect ")]):e._e()],1)],1)],1)],1),t("el-card",{staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"always"}},[t("div",{staticClass:"emq-title"},[e._v(" Subscribe ")]),t("el-form",{ref:"subscription",attrs:{"hide-required-asterisk":"",size:"small","label-position":"top",model:e.subscription}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"topic",label:"Topic"}},[t("el-input",{model:{value:e.subscription.topic,callback:function(t){e.$set(e.subscription,"topic",t)},expression:"subscription.topic"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"qos",label:"QoS"}},[t("el-select",{model:{value:e.subscription.qos,callback:function(t){e.$set(e.subscription,"qos",t)},expression:"subscription.qos"}},e._l(e.qosList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-button",{staticClass:"subscribe-btn",attrs:{disabled:!e.client.connected,type:"success",size:"small"},on:{click:e.doSubscribe}},[e._v(" "+e._s(e.subscribeSuccess?"Subscribed":"Subscribe")+" ")]),e.subscribeSuccess?t("el-button",{staticClass:"subscribe-btn",staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.client.connected,type:"success",size:"small"},on:{click:e.doUnSubscribe}},[e._v(" Unsubscribe ")]):e._e()],1)],1)],1)],1),t("el-card",{staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"always"}},[t("div",{staticClass:"emq-title"},[e._v(" Publish ")]),t("el-form",{ref:"publish",attrs:{"hide-required-asterisk":"",size:"small","label-position":"top",model:e.publish}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"topic",label:"Topic"}},[t("el-input",{model:{value:e.publish.topic,callback:function(t){e.$set(e.publish,"topic",t)},expression:"publish.topic"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"payload",label:"Payload"}},[t("el-input",{model:{value:e.publish.payload,callback:function(t){e.$set(e.publish,"payload",t)},expression:"publish.payload"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"qos",label:"QoS"}},[t("el-select",{model:{value:e.publish.qos,callback:function(t){e.$set(e.publish,"qos",t)},expression:"publish.qos"}},e._l(e.qosList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-button",{staticClass:"publish-btn",attrs:{disabled:!e.client.connected,type:"success",size:"small"},on:{click:e.doPublish}},[e._v(" Publish ")])],1)],1),t("el-card",{staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"always"}},[t("div",{staticClass:"emq-title"},[e._v(" Receive ")]),t("el-col",{attrs:{span:24}},[t("el-input",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"textarea",rows:50,readOnly:""},model:{value:e.receiveNews,callback:function(t){e.receiveNews=t},expression:"receiveNews"}})],1)],1)],1)},l=[],r=o("e7fc"),a=o.n(r),p={name:"Home",data(){return{connection:{protocol:"wss",host:"broker.emqx.io",port:8084,endpoint:"/mqtt",clean:!0,connectTimeout:3e4,reconnectPeriod:4e3,clientId:"emqx_vue_"+Math.random().toString(16).substring(2,8),username:"",password:""},subscription:{topic:"Topic1/pub",qos:0},publish:{topic:"Topic1/sub",qos:0,payload:'{ "msg": "Hello, I am browser." }'},receiveNews:"",qosList:[0,1,2],client:{connected:!1},subscribeSuccess:!1,connecting:!1,retryTimes:0}},methods:{initData(){this.client={connected:!1},this.retryTimes=0,this.connecting=!1,this.subscribeSuccess=!1},handleOnReConnect(){if(this.retryTimes+=1,this.retryTimes>5)try{this.client.end(),this.initData(),this.$message.error("Connection maxReconnectTimes limit, stop retry")}catch(e){this.$message.error(e.toString())}},createConnection(){try{this.connecting=!0;const{protocol:e,host:t,port:o,endpoint:n,...s}=this.connection,i=`${e}://${t}:${o}${n}`;this.client=a.a.connect(i,s),this.client.on&&(this.client.on("connect",()=>{this.connecting=!1,console.log("Connection succeeded!")}),this.client.on("reconnect",this.handleOnReConnect),this.client.on("error",e=>{console.log("Connection failed",e)}),this.client.on("message",(e,t)=>{this.receiveNews=this.receiveNews.concat(t),console.log(`Received message ${t} from topic ${e}`)}))}catch(e){this.connecting=!1,console.log("mqtt.connect error",e)}},doSubscribe(){const{topic:e,qos:t}=this.subscription;this.client.subscribe(e,{qos:t},(e,t)=>{e?console.log("Subscribe to topics error",e):(this.subscribeSuccess=!0,console.log("Subscribe to topics res",t))})},doUnSubscribe(){const{topic:e}=this.subscription;this.client.unsubscribe(e,e=>{e&&console.log("Unsubscribe error",e)})},doPublish(){const{topic:e,qos:t,payload:o}=this.publish;this.client.publish(e,o,{qos:t},e=>{e&&console.log("Publish error",e)})},destroyConnection(){if(this.client.connected)try{this.client.end(!1,()=>{this.initData(),console.log("Successfully disconnected!")})}catch(e){console.log("Disconnect failed",e.toString())}},handleProtocolChange(e){this.connection.port="wss"===e?"8084":"8083"}}},u=p,b=(o("9e79"),o("2877")),d=Object(b["a"])(u,c,l,!1,null,null,null),m=d.exports,h={name:"App",components:{Home:m}},f=h,v=Object(b["a"])(f,s,i,!1,null,null,null),g=v.exports,y=o("5c96"),w=o.n(y);o("0fae");n["default"].config.productionTip=!1,n["default"].use(w.a),new n["default"]({render:e=>e(g)}).$mount("#app")},6:function(e,t){},"9e79":function(e,t,o){"use strict";o("0e48")}});
//# sourceMappingURL=app.2bcae9d1.js.map